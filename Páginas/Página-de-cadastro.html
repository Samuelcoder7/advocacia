<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Monica Valentim - Advogada: página-de-cadastro</title>

  <!-- Link para o arquivo CSS -->
  <link rel="stylesheet" href="../css/Página-de-cadastro.css" />
  <!-- Favicon da página -->
  <link rel="icon" href="../Fotos/favicon_io (1)/favicon-32x32.png" />
  <!-- Link para o Font Awesome (ícones) -->
  <link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"
  />
</head>
<body>
  <!-- Botão para alternar entre modo claro e escuro -->
  <button id="toggle-dark-mode" onclick="toggleDarkMode()">
    Alternar Dark Mode
  </button>

  <!-- Contêiner da imagem -->
  <div class="imagem-container">
    <!-- Imagem logo da página -->
    <img src="../Fotos/PHOTO-2025-04-17-17-55-45.jpg" alt="Logo da página aqui!!!" />
  </div>

  <!-- Contêiner do formulário -->
  <div class="form-container">
    <form id="registroForm" action="#" method="POST" novalidate>
      <h2>Formulário de Registro - RJ</h2>

      <!-- Campo para o nome do usuário -->
      <div class="input-icon">
        <label for="nome">Usuário:</label>
        <i class="fa fa-user"></i>
        <input
          type="text"
          id="nome"
          name="nome"
          placeholder="Digite seu nome completo"
          required
        />
      </div>

      <!-- Campo para o CPF -->
      <label for="cpf">CPF:</label>
      <input
        type="text"
        id="cpf"
        name="cpf"
        maxlength="14"
        placeholder="Digite seu CPF"
        required
        title="Por favor, insira seu CPF."
        onblur="formatarEValidarCPF(this)"
        inputmode="numeric"
        oninput="this.value = this.value.replace(/[^0-9]/g, '')"
      />
      <span
        id="erroCPF"
        class="error"
        style="color: red; display: none;"
        >CPF inválido!</span
      >

      <!-- Campo para o email -->
      <div class="input-icon">
        <label for="email">Email:</label>
        <i class="fa fa-envelope"></i>
        <input
          type="email"
          id="email"
          name="email"
          placeholder="Digite seu email"
          required
          onblur="validaEmail()"
          aria-describedby="erroEmail"
        />
      </div>
      <span
        id="erroEmail"
        class="error"
        style="color: red; display: none;"
        >E-mail inválido!</span
      >

      <!-- Campo para a região -->
      <label for="regiao">Bairro ou Município (RJ):</label>
      <select id="regiao" name="regiao" required onchange="preencherCep()">
        <option value="" disabled selected>
          Selecione seu bairro/município
        </option>
        <option value="Bangu">Bangu</option>
        <option value="Campo Grande">Campo Grande</option>
        <option value="Santa Cruz">Santa Cruz</option>
        <option value="Madureira">Madureira</option>
        <option value="Copacabana">Copacabana</option>
        <option value="Barra da Tijuca">Barra da Tijuca</option>
        <option value="Niterói">Niterói</option>
        <option value="São Gonçalo">São Gonçalo</option>
        <option value="Nova Iguaçu">Nova Iguaçu</option>
        <option value="Duque de Caxias">Duque de Caxias</option>
        <option value="Petrópolis">Petrópolis</option>
        <option value="Volta Redonda">Volta Redonda</option>
      </select>
      <br /><br />

      <!-- Campo para o telefone -->
      <label for="telefone">Telefone:</label>
      <input
        type="tel"
        id="telefone"
        name="telefone"
        placeholder="Digite seu telefone"
        required
        title="Por favor, insira seu número de telefone."
        inputmode="numeric"
        maxlength="11"
        minlength="11"
        onblur="validarTelefone()"
        oninput="this.value = this.value.replace(/[^0-9]/g, '').slice(0, 11)"
      />
      <span
        id="erroTelefone"
        class="error"
        style="color: red; display: none;"
        >Telefone inválido!</span
      >
      <br /><br />

      <!-- Campo para o CEP -->
      <label for="cep">CEP:</label>
      <input
        type="text"
        id="cep"
        name="cep"
        maxlength="9"
        placeholder="Digite seu CEP"
        required
        title="Por favor, insira seu CEP."
        onblur="validaCEP(this)"
        inputmode="numeric"
        oninput="this.value = this.value.replace(/[^0-9]/g, '')"
      />
      <span
        id="erroCEP"
        class="error"
        style="color: red; display: none;"
        >CEP inválido!</span
      >

      <!-- Campo para a senha -->
      <div class="input-icon">
        <label for="senha">Senha:</label>
        <div style="position: relative;">
          <input
            type="password"
            id="senha"
            name="senha"
            placeholder="Digite sua senha"
            required
            oninput="mostrarIconeOlho('senha', 'iconSenha')"
          />
          <i
            id="iconSenha"
            class="fa fa-eye"
            style="
              display: none;
              position: absolute;
              right: 10px;
              top: 50%;
              transform: translateY(-50%);
              cursor: pointer;
            "
            onclick="alternarSenha('senha', this)"
          ></i>
        </div>
      </div>

      <!-- Campo para confirmar a senha -->
      <div class="input-icon">
        <label for="confirmarSenha">Confirmar Senha:</label>
        <div style="position: relative;">
          <input
            type="password"
            id="confirmarSenha"
            name="confirmarSenha"
            placeholder="Confirme sua senha"
            required
            oninput="mostrarIconeOlho('confirmarSenha', 'iconConfirmarSenha')"
          />
          <i
            id="iconConfirmarSenha"
            class="fa fa-eye"
            style="
              display: none;
              position: absolute;
              right: 10px;
              top: 50%;
              transform: translateY(-50%);
              cursor: pointer;
            "
            onclick="alternarSenha('confirmarSenha', this)"
          ></i>
        </div>
      </div>
      <span
        id="erroSenha"
        class="error"
        style="color: red; display: none;"
        >As senhas não coincidem!</span
      >

      <!-- Botão de envio do formulário -->
      <button type="submit">Registrar</button>
      <br /><br />

      <!-- Botão de limpar formulário -->
      <button type="reset">Limpar</button>
      <br /><br />

      <!-- Botão de entrar na página de login -->
      <a href="../Páginas/página-de-login.html" style="color: rgb(0, 0, 0)"
        >Já tem cadastro? Vá para a página de login!</a
      >
    </form>
    <br /><br /><br /><br />
  </div>

  <!-- Rodapé fixo -->
  <footer>© 2025 Monica Valentim - Todos os direitos reservados.</footer>

  
  <script>
    // Mapeamento dos bairros/municípios para os CEPs reais
    const cepsPorRegiao = {
      "Bangu": "21810-000",
      "Campo Grande": "23070-000",
      "Santa Cruz": "23530-000",
      "Madureira": "21350-000",
      "Copacabana": "22040-002",
      "Barra da Tijuca": "22790-000",
      "Niterói": "24020-000",
      "São Gonçalo": "24420-000",
      "Nova Iguaçu": "26215-000",
      "Duque de Caxias": "25070-000",
      "Petrópolis": "25620-000",
      "Volta Redonda": "27210-000",
    };

    function preencherCep() {
      const regiao = document.getElementById("regiao").value;
      const cepInput = document.getElementById("cep");

      if (cepsPorRegiao[regiao]) {
        cepInput.value = cepsPorRegiao[regiao];
        cepInput.dispatchEvent(new Event("input")); // Para disparar eventuais validações
      } else {
        cepInput.value = "";
      }
    }

    // Função para validar CPF básico
    function formatarEValidarCPF(campo) {
      const cpf = campo.value.replace(/\D/g, "");
      if (cpf.length !== 11 || !validarCPF(cpf)) {
        document.getElementById("erroCPF").style.display = "inline";
        campo.focus();
      } else {
        document.getElementById("erroCPF").style.display = "none";
        campo.value = cpf.replace(/(\d{3})(\d{3})(\d{3})(\d{2})/, "$1.$2.$3-$4");
      }
    }

    // Validação básica do CPF
    function validarCPF(cpf) {
      let soma = 0;
      let resto;

      if (
        cpf == "00000000000" ||
        cpf == "11111111111" ||
        cpf == "22222222222" ||
        cpf == "33333333333" ||
        cpf == "44444444444" ||
        cpf == "55555555555" ||
        cpf == "66666666666" ||
        cpf == "77777777777" ||
        cpf == "88888888888" ||
        cpf == "99999999999"
      ) {
        return false;
      }

      for (let i = 1; i <= 9; i++) soma += parseInt(cpf.substring(i - 1, i)) * (11 - i);
      resto = (soma * 10) % 11;
      if (resto == 10 || resto == 11) resto = 0;
      if (resto != parseInt(cpf.substring(9, 10))) return false;

      soma = 0;
      for (let i = 1; i <= 10; i++) soma += parseInt(cpf.substring(i - 1, i)) * (12 - i);
      resto = (soma * 10) % 11;
      if (resto == 10 || resto == 11) resto = 0;
      if (resto != parseInt(cpf.substring(10, 11))) return false;

      return true;
    }

    // Validação do email simples
    function validaEmail() {
      const emailInput = document.getElementById("email");
      const erroEmail = document.getElementById("erroEmail");
      const email = emailInput.value.trim();
      const regex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
      if (!regex.test(email)) {
        erroEmail.style.display = "inline";
        emailInput.focus();
      } else {
        erroEmail.style.display = "none";
      }
    }

    // Validação telefone básico
    function validarTelefone() {
      const telefoneInput = document.getElementById("telefone");
      const erroTelefone = document.getElementById("erroTelefone");
      const telefone = telefoneInput.value.trim();

      if (telefone.length !== 11) {
        erroTelefone.style.display = "inline";
        telefoneInput.focus();
      } else {
        erroTelefone.style.display = "none";
      }
    }

    // Validação CEP simples
    function validaCEP(campo) {
      const cep = campo.value.trim();
      const erroCEP = document.getElementById("erroCEP");

      if (cep.length !== 8) {
        erroCEP.style.display = "inline";
        campo.focus();
      } else {
        erroCEP.style.display = "none";
      }
    }

    // Verifica se as senhas coincidem
    function validarSenhas() {
      const senha = document.getElementById("senha").value;
      const confirmarSenha = document.getElementById("confirmarSenha").value;
      const erroSenha = document.getElementById("erroSenha");

      if (senha !== confirmarSenha) {
        erroSenha.style.display = "inline";
        return false;
      } else {
        erroSenha.style.display = "none";
        return true;
      }
    }

    function mostrarIconeOlho(inputId, iconId) {
      const input = document.getElementById(inputId);
      const icon = document.getElementById(iconId);
      if (input.value.length > 0) {
        icon.style.display = "inline";
      } else {
        icon.style.display = "none";
      }
    }

    // Função para alternar a visualização da senha
    function alternarSenha(inputId, icon) {
      const input = document.getElementById(inputId);
      if (input.type === "password") {
        input.type = "text";
        icon.classList.remove("fa-eye");
        icon.classList.add("fa-eye-slash");
      } else {
        input.type = "password";
        icon.classList.remove("fa-eye-slash");
        icon.classList.add("fa-eye");
      }
    }

    // Evento de submissão do formulário
    document.getElementById("registroForm").addEventListener("submit", function (e) {
      e.preventDefault();

      // Validações finais
      formatarEValidarCPF(document.getElementById("cpf"));
      validaEmail();
      validarTelefone();
      validaCEP(document.getElementById("cep"));

      if (!validarSenhas()) {
        return;
      }

      // Se houver mensagens de erro visíveis, não prossegue
      if (
        document.getElementById("erroCPF").style.display === "inline" ||
        document.getElementById("erroEmail").style.display === "inline" ||
        document.getElementById("erroTelefone").style.display === "inline" ||
        document.getElementById("erroCEP").style.display === "inline"
      ) {
        alert("Por favor, corrija os erros no formulário antes de enviar.");
        return;
      }

      // Pega os valores
      const usuario = {
        nome: document.getElementById("nome").value.trim(),
        cpf: document.getElementById("cpf").value.trim(),
        email: document.getElementById("email").value.trim(),
        regiao: document.getElementById("regiao").value,
        telefone: document.getElementById("telefone").value.trim(),
        cep: document.getElementById("cep").value.trim(),
        senha: document.getElementById("senha").value,
      };

      // Salva no localStorage
      localStorage.setItem("usuario", JSON.stringify(usuario));

      alert("Cadastro realizado com sucesso!");
      window.location.href = "../Páginas/página-de-login.html";
    });
  </script>

  <script>
    // Aplica o dark mode ao carregar a página, se estiver ativado
    if (localStorage.getItem('dark-mode') === 'true') {
      document.body.classList.add('dark-mode');
    }

    function toggleDarkMode() {
      document.body.classList.toggle('dark-mode');
      // Salva a preferência no localStorage
      localStorage.setItem('dark-mode', document.body.classList.contains('dark-mode'));
    }
  </script>
</body>
</html>